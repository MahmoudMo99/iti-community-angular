<div class="container py-4">
  <div class="d-flex flex-wrap align-items-center justify-content-between mb-4">
    <h4 class="fw-bold text-danger mb-2">
      <i class="bi bi-speedometer2 me-2"></i> Admin Dashboard
    </h4>

    <!-- Filters -->
    <div class="filters d-flex gap-3">
      <div class="form-group">
        <select
          class="form-select"
          [(ngModel)]="selectedRound"
          (change)="onFilterChange()"
        >
          <option value="">All Rounds</option>
          <option *ngFor="let r of rounds" [value]="r._id">{{ r.name }}</option>
        </select>
      </div>

      <div class="form-group">
        <select
          class="form-select"
          [(ngModel)]="selectedTrack"
          (change)="onFilterChange()"
        >
          <option value="">All Tracks</option>
          <option *ngFor="let t of tracks" [value]="t._id">{{ t.name }}</option>
        </select>
      </div>
    </div>
  </div>

  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-danger"></div>
  </div>

  <div *ngIf="!isLoading && stats">
    <!-- Stat Cards -->
    <div class="row g-4 mb-4">
      <div
        class="col-sm-6 col-lg-3"
        *ngFor="
          let item of [
            { icon: 'bi-calendar-event', label: 'Rounds', value: stats.rounds },
            { icon: 'bi-diagram-3', label: 'Tracks', value: stats.tracks },
            {
              icon: 'bi-person-badge',
              label: 'Instructors',
              value: stats.instructors
            },
            { icon: 'bi-people', label: 'Students', value: stats.students }
          ]
        "
      >
        <div class="card shadow-sm border-0 stat-card rounded-4">
          <div class="card-body text-center">
            <div class="icon-circle mx-auto mb-3">
              <i class="bi fs-3" [ngClass]="item.icon"></i>
            </div>
            <h6 class="fw-bold text-dark">{{ item.label }}</h6>
            <p class="text-danger fs-5 fw-bold mb-0">{{ item.value || 0 }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts -->
    <div class="row g-4">
      <div class="col-md-6">
        <div class="card shadow-sm border-0 rounded-4 p-3">
          <div echarts [options]="studentTrackChart" class="chart"></div>
        </div>
      </div>

      <div class="col-md-6">
        <div class="card shadow-sm border-0 rounded-4 p-3">
          <div echarts [options]="coursesRoundChart" class="chart"></div>
        </div>
      </div>
    </div>
  </div>
</div>
